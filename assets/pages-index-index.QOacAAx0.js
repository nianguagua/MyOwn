import{o as e,c as a,w as t,a as l,b as n,d as s,t as i,n as u,e as c,f as d,i as o,g as r,h as m,r as f,j as h,k as _,l as p,m as v,u as g,p as b,q as x,F as z,s as w,S as y,v as k,x as F,y as Z}from"./index-ClOZnmWs.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";const G=j({__name:"IndexList",props:{item:Object,index:Number,index0:Number},emits:["guanzhuFun","dianzanFun","caiFun"],setup(f,{emit:h}){const _=f,p=h,v=e=>{d({url:"/pages/user/user"})},g=(e,a,t)=>{p("dianzanFun",a,t,_.index0)};return(d,h)=>{const b=o,x=r,z=m;return e(),a(b,null,{default:t((()=>[l(b,{class:"content-box"},{default:t((()=>[l(b,{class:"header"},{default:t((()=>[l(b,{class:"item"},{default:t((()=>[n("img",{class:"img",src:f.item.url,alt:"",srcset:"",onClick:v},null,8,["src"]),l(b,{class:"info"},{default:t((()=>[l(b,{class:"name"},{default:t((()=>[s(i(f.item.name),1)])),_:1}),l(b,{class:"time"},{default:t((()=>[s(i(f.item.time),1)])),_:1})])),_:1})])),_:1}),l(b,{class:"item"},{default:t((()=>[l(b,{class:u(["button animate__animated",{hasGuzhu:f.item.hasGuzhu}]),"hover-class":"animate__flip","hover-stay-time":"800",onClick:h[0]||(h[0]=e=>{return f.item,a=f.index,void p("guanzhuFun",a,_.index0);var a})},{default:t((()=>[s("关注")])),_:1},8,["class"])])),_:1})])),_:1}),l(b,{class:"content",onClick:h[1]||(h[1]=e=>{f.item})},{default:t((()=>[l(b,null,{default:t((()=>[s(i(f.item.content),1)])),_:1}),""!=f.item.contentUrl?(e(),a(x,{key:0,mode:"widthFix",src:f.item.contentUrl,alt:"",srcset:""},null,8,["src"])):c("",!0)])),_:1}),n("div",{class:"footer"},[l(b,{class:u(["item",{"zan-active":f.item.hasZan}]),onClick:h[2]||(h[2]=e=>g(f.item,f.index,1))},{default:t((()=>[l(z,{class:"iconfont icon-dianzan2"}),l(z,null,{default:t((()=>[s(i(f.item.zan>0?f.item.zan:"支持"),1)])),_:1})])),_:1},8,["class"]),l(b,{class:u(["item",{"zan-active":!f.item.hasZan}]),onClick:h[3]||(h[3]=e=>g(f.item,f.index,2))},{default:t((()=>[l(z,{class:"iconfont icon-cai"}),l(z,null,{default:t((()=>[s("踩")])),_:1})])),_:1},8,["class"]),l(b,{class:"item"},{default:t((()=>[l(z,{class:"iconfont icon-pinglun2"}),l(z,null,{default:t((()=>[s(i(f.item.pinglun>0?f.item.pinglun:"评论"),1)])),_:1})])),_:1}),l(b,{class:"item"},{default:t((()=>[l(z,{class:"iconfont icon-zhuanfa1"}),l(z,null,{default:t((()=>[s("分享")])),_:1})])),_:1})])])),_:1})])),_:1})}}},[["__scopeId","data-v-f9f0f806"]]);const C=j({__name:"index",setup(n){const c=h(500);h([]);const d=h(1),r=h(""),m=h([]),j=_({text:"",name:""});p((()=>{m.value=function(){const e=[{id:1,url:"https://gd-hbimg.huaban.com/668f8ca145565fc7893a9a25cec48ccc48fa54123f996-d7E9vX_fw1200webp",name:"昵称1",time:"2022-05-28 下午4:22",content:"这是一条内容1",contentUrl:"https://gd-hbimg.huaban.com/1c4f6ce4c186e21fb53dc1ac5ef705012a5f0fd614c15f-3t0Ss4_fw1200webp",zan:8,hasZan:!0,cai:0,pinglun:6,hasGuzhu:!1},{id:2,url:"https://gd-hbimg.huaban.com/4c685408a04c055c7194a73521f4b983eeff9df617750-pBg833_fw1200webp",name:"昵称2",time:"2022-05-28 下午4:22",content:"这是一条内容2",contentUrl:"",zan:1,hasZan:!0,cai:0,pinglun:0,hasGuzhu:!1},{id:2,url:"https://gd-hbimg.huaban.com/82cb2a84b070ea9eddf72b0c4a1037757b113c3d1acb1-j0oj77_fw1200webp",name:"昵称3",time:"2022-05-28 下午4:22",content:"这是一条内容2",contentUrl:"https://gd-hbimg.huaban.com/395f0e204f685ce6061d116cf0bad2b3a1d25bd5dae7d7-3DZF0Y_fw658webp",zan:10,hasZan:!1,cai:0,pinglun:5,hasGuzhu:!1}];return[{title:"关注",id:"guanzhu",list:e},{title:"推荐",id:"tuijian",list:e},{title:"体育",id:"tiyu",list:e},{title:"热点",id:"redian",list:[]},{title:"财经",id:"caijing",list:[]},{title:"娱乐",id:"yule",list:[]},{title:"军事",id:"junshi",list:[]},{title:"历史",id:"lishi",list:[]}]}(),new Promise(((e,a)=>{f({url:"https://api.xygeng.cn/one",method:"get",success(a){e(a.data)}})})).then((e=>{let a=e.data;j.text=a.content,j.name=a.name,console.log(e)})),v({success:e=>{c.value=e.windowHeight-g(100)}})}));const C=(e,a)=>{m.value[a].list[e].hasGuzhu=!m.value[a].list[e].hasGuzhu,m.value[a].list[e].hasGuzhu?F({title:"成功关注"}):F({title:"取消关注",icon:"error"})},U=(e,a,t)=>{if(1==a){if(m.value[t].list[e].hasZan)return;m.value[t].list[e].hasZan=!0,m.value[t].list[e].zan++}else if(2==a){if(!m.value[t].list[e].hasZan)return;m.value[t].list[e].hasZan=!1,m.value[t].list[e].zan--}},I=e=>{d.value=e.detail.current};return(n,f)=>{const h=o,_=y,p=Z,v=k;return e(),a(h,null,{default:t((()=>[s(" 姓名："+i(j.name)+" 内容："+i(j.text)+" ",1),l(_,{class:"scroll-row","scroll-x":"true","scroll-into-view":r.value},{default:t((()=>[(e(!0),b(z,null,x(m.value,((l,n)=>(e(),a(h,{key:l.id,class:u(["scroll-row-item",d.value==n?"tb-active":""]),id:l.id,"show-scrollbar":"false",onClick:e=>((e,a)=>{d.value!=a&&(d.value=a,r.value=e.id)})(l,n)},{default:t((()=>[s(i(l.title),1)])),_:2},1032,["class","id","onClick"])))),128))])),_:1},8,["scroll-into-view"]),l(v,{current:d.value,onChange:I,style:w("height:"+c.value+"px")},{default:t((()=>[(e(!0),b(z,null,x(m.value,((n,s)=>(e(),a(p,{key:n.id,"item-id":n.id},{default:t((()=>[l(h,{class:"swiper-item"},{default:t((()=>[l(_,{class:"scroll-col","scroll-y":"true",style:w("height:"+c.value+"px")},{default:t((()=>[l(h,null,{default:t((()=>[(e(!0),b(z,null,x(n.list,((t,l)=>(e(),a(G,{key:t.id,item:t,index:l,index0:s,onGuanzhuFun:C,onDianzanFun:U},null,8,["item","index","index0"])))),128))])),_:2},1024)])),_:2},1032,["style"])])),_:2},1024)])),_:2},1032,["item-id"])))),128))])),_:1},8,["current","style"])])),_:1})}}},[["__scopeId","data-v-7528e756"]]);export{C as default};
