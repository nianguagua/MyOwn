import{o as e,c as a,w as t,a as l,b as s,d as n,t as i,n as u,e as c,f as d,i as o,g as r,h as m,j as f,r as h,k as _,l as p,m as v,p as g,u as b,q as z,s as x,F as w,v as y,S as k,x as F,y as Z,z as j}from"./index-CYVdMUNb.js";import{_ as G}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=G({__name:"IndexList",props:{item:Object,index:Number,index0:Number},emits:["guanzhuFun","dianzanFun","caiFun"],setup(h,{emit:_}){const p=h,v=_,g=e=>{d({url:"/pages/user/user"})},b=(e,a,t)=>{v("dianzanFun",a,t,p.index0)};return(d,_)=>{const z=o,x=r,w=m,y=f;return e(),a(z,null,{default:t((()=>[l(z,{class:"content-box"},{default:t((()=>[l(z,{class:"header"},{default:t((()=>[l(z,{class:"item"},{default:t((()=>[s("img",{class:"img",src:h.item.url,alt:"",srcset:"",onClick:g},null,8,["src"]),l(z,{class:"info"},{default:t((()=>[l(z,{class:"name"},{default:t((()=>[n(i(h.item.name),1)])),_:1}),l(z,{class:"time"},{default:t((()=>[n(i(h.item.time),1)])),_:1})])),_:1})])),_:1}),l(z,{class:"item"},{default:t((()=>[l(x,{class:u(["animate__animated",{hasGuzhu:h.item.hasGuzhu}]),"hover-class":"animate__flip","hover-stay-time":"800",onClick:_[0]||(_[0]=e=>{return h.item,a=h.index,void v("guanzhuFun",a,p.index0);var a})},{default:t((()=>[n("关注")])),_:1},8,["class"])])),_:1})])),_:1}),l(z,{class:"content",onClick:_[1]||(_[1]=e=>{h.item})},{default:t((()=>[l(z,null,{default:t((()=>[n(i(h.item.content),1)])),_:1}),""!=h.item.contentUrl?(e(),a(w,{key:0,mode:"widthFix",src:h.item.contentUrl,alt:"",srcset:""},null,8,["src"])):c("",!0)])),_:1}),s("div",{class:"footer"},[l(z,{class:u(["item",{"zan-active":h.item.hasZan}]),onClick:_[2]||(_[2]=e=>b(h.item,h.index,1))},{default:t((()=>[l(y,{class:"iconfont icon-dianzan2"}),l(y,null,{default:t((()=>[n(i(h.item.zan>0?h.item.zan:"支持"),1)])),_:1})])),_:1},8,["class"]),l(z,{class:u(["item",{"zan-active":!h.item.hasZan}]),onClick:_[3]||(_[3]=e=>b(h.item,h.index,2))},{default:t((()=>[l(y,{class:"iconfont icon-cai"}),l(y,null,{default:t((()=>[n("踩")])),_:1})])),_:1},8,["class"]),l(z,{class:"item"},{default:t((()=>[l(y,{class:"iconfont icon-pinglun2"}),l(y,null,{default:t((()=>[n(i(h.item.pinglun>0?h.item.pinglun:"评论"),1)])),_:1})])),_:1}),l(z,{class:"item"},{default:t((()=>[l(y,{class:"iconfont icon-zhuanfa1"}),l(y,null,{default:t((()=>[n("分享")])),_:1})])),_:1})])])),_:1})])),_:1})}}},[["__scopeId","data-v-0d5d7e59"]]);const U=G({__name:"index",setup(s){const c=_(500);_([]);const d=_(1),r=_(""),m=_([]),f=p({text:"",name:""});v((()=>{m.value=function(){const e=[{id:1,url:"https://gd-hbimg.huaban.com/668f8ca145565fc7893a9a25cec48ccc48fa54123f996-d7E9vX_fw1200webp",name:"昵称1",time:"2022-05-28 下午4:22",content:"这是一条内容1",contentUrl:"https://gd-hbimg.huaban.com/1c4f6ce4c186e21fb53dc1ac5ef705012a5f0fd614c15f-3t0Ss4_fw1200webp",zan:8,hasZan:!0,cai:0,pinglun:6,hasGuzhu:!1},{id:2,url:"https://gd-hbimg.huaban.com/4c685408a04c055c7194a73521f4b983eeff9df617750-pBg833_fw1200webp",name:"昵称2",time:"2022-05-28 下午4:22",content:"这是一条内容2",contentUrl:"",zan:1,hasZan:!0,cai:0,pinglun:0,hasGuzhu:!1},{id:2,url:"https://gd-hbimg.huaban.com/82cb2a84b070ea9eddf72b0c4a1037757b113c3d1acb1-j0oj77_fw1200webp",name:"昵称3",time:"2022-05-28 下午4:22",content:"这是一条内容2",contentUrl:"https://gd-hbimg.huaban.com/395f0e204f685ce6061d116cf0bad2b3a1d25bd5dae7d7-3DZF0Y_fw658webp",zan:10,hasZan:!1,cai:0,pinglun:5,hasGuzhu:!1}];return[{title:"关注",id:"guanzhu",list:e},{title:"推荐",id:"tuijian",list:e},{title:"体育",id:"tiyu",list:e},{title:"热点",id:"redian",list:[]},{title:"财经",id:"caijing",list:[]},{title:"娱乐",id:"yule",list:[]},{title:"军事",id:"junshi",list:[]},{title:"历史",id:"lishi",list:[]}]}(),new Promise(((e,a)=>{h({url:"https://api.xygeng.cn/one",method:"get",success(a){e(a.data)}})})).then((e=>{let a=e.data;f.text=a.content,f.name=a.name,console.log(e)})),g({success:e=>{c.value=e.windowHeight-b(100)}})}));const G=(e,a)=>{m.value[a].list[e].hasGuzhu=!m.value[a].list[e].hasGuzhu,m.value[a].list[e].hasGuzhu?Z({title:"成功关注"}):Z({title:"取消关注",icon:"error"})},U=(e,a,t)=>{if(1==a){if(m.value[t].list[e].hasZan)return;m.value[t].list[e].hasZan=!0,m.value[t].list[e].zan++}else if(2==a){if(!m.value[t].list[e].hasZan)return;m.value[t].list[e].hasZan=!1,m.value[t].list[e].zan--}},I=e=>{d.value=e.detail.current};return(s,h)=>{const _=o,p=k,v=j,g=F;return e(),a(_,null,{default:t((()=>[n(" 姓名："+i(f.name)+" 内容："+i(f.text)+" ",1),l(p,{class:"scroll-row","scroll-x":"true","scroll-into-view":r.value},{default:t((()=>[(e(!0),z(w,null,x(m.value,((l,s)=>(e(),a(_,{key:l.id,class:u(["scroll-row-item",d.value==s?"tb-active":""]),id:l.id,"show-scrollbar":"false",onClick:e=>((e,a)=>{d.value!=a&&(d.value=a,r.value=e.id)})(l,s)},{default:t((()=>[n(i(l.title),1)])),_:2},1032,["class","id","onClick"])))),128))])),_:1},8,["scroll-into-view"]),l(g,{current:d.value,onChange:I,style:y("height:"+c.value+"px")},{default:t((()=>[(e(!0),z(w,null,x(m.value,((s,n)=>(e(),a(v,{key:s.id,"item-id":s.id},{default:t((()=>[l(_,{class:"swiper-item"},{default:t((()=>[l(p,{class:"scroll-col","scroll-y":"true",style:y("height:"+c.value+"px")},{default:t((()=>[l(_,null,{default:t((()=>[(e(!0),z(w,null,x(s.list,((t,l)=>(e(),a(C,{key:t.id,item:t,index:l,index0:n,onGuanzhuFun:G,onDianzanFun:U},null,8,["item","index","index0"])))),128))])),_:2},1024)])),_:2},1032,["style"])])),_:2},1024)])),_:2},1032,["item-id"])))),128))])),_:1},8,["current","style"])])),_:1})}}},[["__scopeId","data-v-7528e756"]]);export{U as default};
